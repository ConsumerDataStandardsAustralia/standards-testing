{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "https://cds.gov.au/test-data-schema.0.0.1.json",
    "title": "Consumer Data Right Test Data JSON Schema",
    "description": "A JSON schema for defining test data files that can be used to seed a mock, or test, implementation of a Data Holder for the Consumer Data Right",
    "type": "object",
    "required": [
        "fileVersion",
        "standardsVersion",
        "title"
    ],
    "additionalProperties": false,
    "properties": {
        "fileVersion": {
            "type": "string",
            "description": "The version of the file formatted using semver (without extensions)",
            "pattern": "^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)$"
        },
        "standardsVersion": {
            "type": "string",
            "description": "The version of the CDR standards that these tests are validated for.  For formatted using semver (without extensions)",
            "pattern": "^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)$"
        },
        "title": {
            "type": "string",
            "description": "A short title of the test data file"
        },
        "description": {
            "type": "string",
            "description": "An optional description of the test data file to identify its purpose"
        },
        "holders": {
            "type": "object",
            "description": "A set of data holders, and their associated data, keyed on data holder ID",
            "additionalProperties": false,
            "patternProperties": {
                "^[a-zA-Z0-9]+$": {
                    "$ref": "#/$defs/holder"
                }
            }
        },
        "clientCache": {
            "$ref": "#/$defs/clientCache"
        },
        "registerCache": {
            "$ref": "#/$defs/registerCache"
        }
    },
    "$defs": {
        "holder": {
            "type": "object",
            "description": "Data for a single data holder",
            "additionalProperties": false,
            "properties": {
                "unauthenticated": {
                    "type": "object",
                    "description": "Data for a single data holder",
                    "additionalProperties": false,
                    "properties": {
                        "unauthenticated": {
                },
                "customers": {
                    "type": "array",
                    "description": "An array of customers and their data",
                    "items": {
                        "$ref": "#/$defs/reference"
                    }
                }
            }
        },
        "clientCache": {
            "type": "object",
            "description": "Cache of the previously registered clients for a data holder"
        },
        "registerCache": {
            "type": "object",
            "description": "Cache of the CDR Register meta data to seed the holder with"
        }
    }
}
